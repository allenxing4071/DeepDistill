
# 增强版多源内容知识提炼流程（视频/音频/图片/文档）

## 流程图（文字版）

```
┌─────────────────────────────┐
│          输入层：多源内容       │
├─────────────────────────────┤
│ 视频 (mp4/mov)               │
│ 音频 (mp3/wav)               │
│ 文档 / 网页 (Word/PPT/Excel/HTML/PDF) │
│ 图片 (JPG/PNG 等)            │
└───────────────┬─────────────┘
                │
                ▼
┌─────────────────────────────┐
│        内容处理层             │
├─────────────────────────────┤
│ 视频/音频 → ffmpeg → faster-whisper → 文本 (本地 GPU MPS 加速) │
│ 文档/网页 → Python 文档库/BeautifulSoup/PyPDF2/python-pptx → 文本 (本地即可) │
│ 图片 → EasyOCR / PaddleOCR → 文本 (本地 GPU 可加速) │
└───────────────┬─────────────┘
                │
                ▼
┌─────────────────────────────┐
│   视频增强分析层（增强版）     │
├─────────────────────────────┤
│ 镜头切割 / 分镜分析 (PySceneDetect) [本地] │
│ 场景识别 (YOLOv8 / Segment Anything) [本地 GPU / 可API] │
│ 人物/动作识别 (OpenPose / MediaPipe) [本地 GPU/CPU / 可API] │
│ 拍摄手法分析 (构图/景别/镜头类型) [本地 GPU / 可API] │
│ 风格特征分析 (色彩/光影/节奏/视觉冲击力) [Video Swin / TimeSformer / CLIP 本地 GPU / 可API] │
│ 转场 / 特效识别 [自定义特征提取，本地优先] │
└───────────────┬─────────────┘
                │
                ▼
┌─────────────────────────────┐
│         AI分析层             │
├─────────────────────────────┤
│ 短内容 → 本地轻量模型 (DeepSeek轻量 / 千问轻量) │
│ 中长内容 → API 双模型 (DeepSeek V3 + 千问 Max) │
│ 输出：结构化文本 / 核心逻辑 / 关键词 │
└───────────────┬─────────────┘
                │
                ▼
┌─────────────────────────────┐
│       融合 & 输出层           │
├─────────────────────────────┤
│ 去重 / 合并 / 补全 / 结构化 │
│ 可选输出：                   │
│ ├ Skill文档 (可交互 / 可复用 / 结构化知识点) │
│ └ 传统文本格式 (Markdown / Word / JSON) │
│ 图片/视觉素材生成：          │
│ 提炼出的文字 + 风格向量 → AI生成新图片/视频素材 │
└───────────────┬─────────────┘
                │
                ▼
┌─────────────────────────────┐
│      知识库 / 文档管理层      │
├─────────────────────────────┤
│ 平台：飞书 / Notion / Obsidian │
│ 功能：分类管理，支持下游创作(PPT/报告/视频/Skill文档) │
└─────────────────────────────┘
```

## 模块表格

| 流程模块 | 功能描述 | 模型/工具 | 本地部署 | API 使用 | 硬件需求 | 备注 |
|----------|----------|-----------|-----------|-----------|-----------|------|
| 输入层 | 收集视频/音频/文档/网页/图片 | — | — | — | — | 支持多源格式统一导入 |
| 内容处理层 - 视频/音频 | 视频/音频 → 文本 | ffmpeg + faster-whisper | ✅ 本地 GPU MPS | ⚪ API 可选 | GPU 8GB+ | 短视频本地即可，长视频可API辅助 |
| 内容处理层 - 文档/网页 | 文档/网页 → 文本 | PyPDF2 / python-pptx / BeautifulSoup | ✅ 本地 | — | CPU即可 | 提取文字和结构信息 |
| 内容处理层 - 图片 | 图片 → 文本 | EasyOCR / PaddleOCR | ✅ 本地 GPU/CPU | ⚪ API可选 | GPU可加速 | 提取图片中文字 |
| 视频增强分析层 - 镜头 | 镜头切割/分镜 | PySceneDetect | ✅ 本地 | — | CPU/GPU | 本地优先 |
| 视频增强分析层 - 场景 | 场景识别 | YOLOv8 / Segment Anything | ✅ 本地 GPU | ⚪ API 可选 | GPU 8GB+ | 小批量/快速可API |
| 视频增强分析层 - 动作 | 人物/动作识别 | OpenPose / MediaPipe | ✅ 本地 GPU/CPU | ⚪ API可选 | GPU优先 | 高精度 OpenPose，轻量 MediaPipe |
| 视频增强分析层 - 拍摄手法 | 构图/景别/镜头类型 | Video Swin / TimeSformer | ✅ 本地 GPU | ⚪ API可选 | GPU 16GB+ 优化长视频 | 输出风格向量 |
| 视频增强分析层 - 风格特征 | 色彩/光影/节奏/视觉冲击力 | CLIP / Video Swin | ✅ 本地 GPU | ⚪ API可选 | GPU 16GB+ | 可用于生成新图片/视频 |
| 视频增强分析层 - 转场/特效 | 转场/特效识别 | 自定义特征提取 | ✅ 本地 | — | CPU/GPU | 本地优先 |
| AI分析层 | 核心逻辑/关键词/结构化文本 | DeepSeek轻量 / 千问轻量 / DeepSeek V3 + 千问 Max API | ✅ 短内容本地轻量 | ⚪ 中长内容API双模型 | GPU/CPU | 输出结构化文本，支持Skill文档 |
| 融合 & 输出层 | 去重/合并/补全/结构化 | Python处理 | ✅ 本地 | — | CPU即可 | 输出 Skill 文档 或 Markdown/Word/JSON |
| 融合 & 输出层 - 图片生成 | 图片/视觉素材生成 | Stable Diffusion / RunwayML / Pika Labs | ✅ 本地 GPU | ⚪ 可API | GPU 16GB+ | 使用文字+风格向量生成新素材 |
| 知识库/文档管理层 | 分类管理，支持下游创作 | 飞书 / Notion / Obsidian | ✅ 本地/云 | — | CPU即可 | Skill文档、传统文本、生成素材整合 |
